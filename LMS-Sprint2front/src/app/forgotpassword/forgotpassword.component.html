<div class="alert alert-success"  *ngIf = 'falsemessage'>{{falsemessage}}</div>
<div class="alert alert-danger"  *ngIf = 'truemessage'>{{truemessage}}</div>
<div class="container card col-md-4 offset-md-4 mt-5" style="background-color:rgb(243, 237, 237);">
    <div class="card-header text-center font-weight-bold mt-4" style="background-color: rgb(129, 196, 129); color: rgb(89, 96, 104);">CHANGE PASSWORD</div>
    <form #forgotpasswordform='ngForm' (ngSubmit)='forgotpassword(forgotpasswordform)' >

        <div class="form-group mt-4">
            <label for="email">Enter your email:</label>
            <input type="text" name="email" class="form-control" id="email" required pattern="^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$" placeholder="Please enter your email" #email='ngModel' ngModel>
            <div *ngIf='email.invalid && email.touched'>
              <div class="alert alert-danger" *ngIf='email.errors.required'>
                <small class="font-italic font-weight-normal">This field is mandatory</small>
              </div>
              <div class="alert alert-danger" *ngIf='email.errors.pattern'>
                <small class="font-italic font-weight-normal">Please enter minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character</small>
              </div>
            </div>
          </div>
          <div class="form-group mt-4">
            <label for="password">Enter new password: <i class="fa fa-key icon"></i></label>
            <div class="input-group mb-3">
              <input [type]="passwordType" #password='ngModel' pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" ngModel name="password" id="password" class="form-control" 
              required placeholder="Enter password. Ex:- Qwerty@123">
              <div class="input-group-append">
                  <span class="input-group-text" (click)=showPassword()>
                      <i [class]="iconClass"></i>
                  </span>
              </div>
          </div>            
            <div *ngIf='password.invalid && password.touched'>
              <div class="alert alert-danger" *ngIf='password.errors.required'>
                <small class="font-italic font-weight-normal">This field is mandatory</small>
              </div>
              <div class="alert alert-danger" *ngIf='password.errors.pattern'>
                <small class="font-italic font-weight-normal">Please enter minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character</small>
              </div>
            </div>
          </div>
          <div class="form-group mt-4">
            <label for="conpassword">Confirm Password: <i class="fa fa-key icon"></i></label>
            <div class="input-group mb-3">
              <input [type]="passwordType2" #conpassword='ngModel' pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" ngModel name="conpassword" id="conpassword" class="form-control" 
              required placeholder="Confirm password.">
              <div class="input-group-append">
                  <span class="input-group-text" (click)=showPassword2()>
                      <i [class]="iconClass2"></i>
                  </span>
              </div>
          </div>   
            <div *ngIf='conpassword.invalid && conpassword.touched'>
              <div class="alert alert-danger" *ngIf='conpassword.errors.required'>
                <small class="font-italic font-weight-normal">This field is mandatory</small>
              </div>
              <div class="alert alert-danger" *ngIf='conpassword.errors.pattern'>
                <small class="font-italic font-weight-normal">Please enter minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character</small>
              </div>
            </div>
          </div>

          <div *ngIf="password.touched && conpassword.touched">
            <div *ngIf="password.value !== conpassword.value">
              <div class="alert alert-danger">Password not matching!!!</div>
            </div>
        </div>
  
        <div class="text-center mt-4">
            <button [disabled]="forgotpasswordform.form.invalid || password.value !== conpassword.value" type="submit" class="btn font-weight-bold col-md-3 offset-md-4"  style="background-color:slategrey;">Update</button>
        </div>
        <div class="mt-4"></div>
        
      </form>
</div>
<div class="mt-4"></div>

